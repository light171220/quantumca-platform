{{template "base.html" .}}

{{define "content"}}
<div class="page-header">
    <h1 class="page-title">Customers</h1>
    <p>Manage customer accounts and service tiers</p>
</div>

<div class="card">
    <div class="card-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 class="card-title">Customer List</h2>
            <button data-modal="addCustomerModal" class="btn btn-primary">Add Customer</button>
        </div>
    </div>
    <div class="table-container">
        <table data-sortable="true">
            <thead>
                <tr>
                    <th data-sort="id">ID</th>
                    <th data-sort="company">Company</th>
                    <th data-sort="email">Email</th>
                    <th data-sort="tier">Tier</th>
                    <th data-sort="status">Status</th>
                    <th data-sort="created">Created</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {{range .customers}}
                <tr>
                    <td>{{.ID}}</td>
                    <td>{{.CompanyName}}</td>
                    <td>{{.Email}}</td>
                    <td>
                        {{if eq .Tier 1}}
                            <span class="status-badge" style="background: #dbeafe; color: #1e40af;">Tier 1</span>
                        {{else if eq .Tier 2}}
                            <span class="status-badge" style="background: #fef3c7; color: #92400e;">Tier 2</span>
                        {{else if eq .Tier 3}}
                            <span class="status-badge" style="background: #f3e8ff; color: #7c3aed;">Tier 3</span>
                        {{end}}
                    </td>
                    <td>
                        {{if eq .Status "active"}}
                            <span class="status-badge status-active">Active</span>
                        {{else}}
                            <span class="status-badge status-pending">{{.Status}}</span>
                        {{end}}
                    </td>
                    <td>{{.CreatedAt.Format "2006-01-02"}}</td>
                    <td>
                        <button onclick="copyToClipboard('{{.APIKey}}')" class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">Copy API Key</button>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Service Tiers</h2>
    </div>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
        <div class="card" style="border-left: 4px solid #1e40af;">
            <h3>Tier 1 - Direct Certificates</h3>
            <p>Perfect for small businesses and individual developers</p>
            <ul style="margin: 1rem 0;">
                <li>Direct certificate issuance</li>
                <li>Domain validation</li>
                <li>1-year validity</li>
                <li>Standard support</li>
            </ul>
        </div>
        <div class="card" style="border-left: 4px solid #92400e;">
            <h3>Tier 2 - Intermediate CA</h3>
            <p>Enterprise solution for organizations</p>
            <ul style="margin: 1rem 0;">
                <li>Intermediate CA certificates</li>
                <li>Issue own certificates</li>
                <li>Extended validation</li>
                <li>Priority support</li>
            </ul>
        </div>
        <div class="card" style="border-left: 4px solid #7c3aed;">
            <h3>Tier 3 - Private Root CA</h3>
            <p>Government and critical infrastructure</p>
            <ul style="margin: 1rem 0;">
                <li>Private root CA setup</li>
                <li>Air-gapped operations</li>
                <li>Custom policies</li>
                <li>24/7 dedicated support</li>
            </ul>
        </div>
    </div>
</div>

<div class="modal" id="addCustomerModal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="close">&times;</span>
            <h2 class="modal-title">Add New Customer</h2>
        </div>
        <form data-api="/api/v1/customers" data-method="POST">
            <div class="form-group">
                <label class="form-label" for="company_name">Company Name</label>
                <input type="text" class="form-input" id="company_name" name="company_name" required>
            </div>
            <div class="form-group">
                <label class="form-label" for="email">Email</label>
                <input type="email" class="form-input" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label class="form-label" for="tier">Service Tier</label>
                <select class="form-select" id="tier" name="tier" required>
                    <option value="1">Tier 1 - Direct Certificates</option>
                    <option value="2">Tier 2 - Intermediate CA</option>
                    <option value="3">Tier 3 - Private Root CA</option>
                </select>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Create Customer</button>
                <button type="button" class="btn btn-secondary close">Cancel</button>
            </div>
        </form>
    </div>
</div>
{{end}}