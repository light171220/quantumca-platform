{{template "base.html" .}}

{{define "content"}}
<div class="page-header">
    <h1 class="page-title">Issue Certificate</h1>
    <p>Create a new quantum-safe certificate</p>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Certificate Request</h2>
    </div>
    <form data-api="/api/v1/certificates" data-method="POST" data-redirect="/certificates">
        <div class="form-group">
            <label class="form-label" for="customer_id">Customer</label>
            <select class="form-select" id="customer_id" name="customer_id" required>
                <option value="">Select a customer</option>
                {{range .customers}}
                <option value="{{.ID}}">{{.CompanyName}} ({{.Email}})</option>
                {{end}}
            </select>
        </div>

        <div class="form-group">
            <label class="form-label" for="common_name">Common Name</label>
            <input type="text" class="form-input" id="common_name" name="common_name" 
                   placeholder="example.com" required>
        </div>

        <div class="form-group">
            <label class="form-label" for="subject_alt_names">Subject Alternative Names</label>
            <input type="text" class="form-input" id="subject_alt_names" name="subject_alt_names" 
                   placeholder="www.example.com,api.example.com (comma-separated)">
        </div>

        <div class="form-group">
            <label class="form-label" for="validity_days">Validity Period (Days)</label>
            <select class="form-select" id="validity_days" name="validity_days">
                <option value="90">90 days</option>
                <option value="365" selected>1 year</option>
                <option value="730">2 years</option>
                <option value="1095">3 years</option>
            </select>
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary">Issue Certificate</button>
            <a href="/certificates" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Domain Validation</h2>
    </div>
    <p>Before issuing a certificate, domains must be validated. You can validate domains using either:</p>
    <ul style="margin: 1rem 0;">
        <li><strong>DNS TXT Record:</strong> Add a TXT record at <code>_acme-challenge.yourdomain.com</code></li>
        <li><strong>HTTP File Validation:</strong> Place a file at <code>http://yourdomain.com/.well-known/acme-challenge/TOKEN</code></li>
    </ul>
    <a href="/domains" class="btn btn-secondary">Manage Domain Validation</a>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Quantum-Safe Algorithms</h2>
    </div>
    <p>All certificates are issued using post-quantum cryptography algorithms:</p>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
        <div>
            <strong>üîê Dilithium2</strong><br>
            <small>Primary signing algorithm</small>
        </div>
        <div>
            <strong>üõ°Ô∏è Falcon512</strong><br>
            <small>Compact signatures</small>
        </div>
        <div>
            <strong>üîí Kyber768</strong><br>
            <small>Key encapsulation</small>
        </div>
        <div>
            <strong>‚ö° SPHINCS+</strong><br>
            <small>Stateless signatures</small>
        </div>
    </div>
</div>
{{end}}